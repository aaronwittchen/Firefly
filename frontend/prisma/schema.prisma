generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ErrorLog {
  id           Int      @id @default(autoincrement())
  message      String
  errorType    String?  @map("error_type") @db.VarChar(100)
  project      String?  @db.VarChar(255)
  gitBranch    String?  @map("git_branch") @db.VarChar(255)
  gitCommit    String?  @map("git_commit") @db.VarChar(40)
  os           String?  @db.VarChar(50)
  language     String?  @db.VarChar(50)
  tags         String[]
  solution     String?
  notes        String?
  timeToFixMin Int?     @map("time_to_fix_min")
  resolved     Boolean  @default(false)
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt    DateTime @updatedAt @map("updated_at") @db.Timestamptz

  @@index([project])
  @@index([errorType])
  @@index([language])
  @@index([resolved])
  @@map("error_logs")
}

model User {
  id             Int       @id @default(autoincrement())
  githubId       Int       @unique @map("github_id")
  githubUsername String    @unique @map("github_username")
  email          String?   @unique
  name           String?
  avatarUrl      String?   @map("avatar_url")
  accessToken    String    @map("access_token")
  createdAt      DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt      DateTime? @updatedAt @map("updated_at") @db.Timestamptz

  @@map("users")
}
